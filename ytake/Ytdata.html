<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Display</title>
    <style>
  body{font-family:Arial,sans-serif;width: 100%;background-color:#d7e9ff;background-repeat:no-repeat;height:100%;}  
 
  #data{margin-top:20px;overflow-y:hidden;} table {margin:0;width:100%;border-collapse: collapse;margin-top:20px;}
  table, th, td {border:1px solid #9575CD;}
  th, td {padding:8px;text-align:left;border-radius:10px;font-size:16px;}
  th {background-color:#f4f4f4;}
  h1 {color: #fff;margin-left: 20px;}
  h1 b{color: #9575CD;}
 /* Input styles */
 .input{display:flex;flex-wrap:wrap; gap:10px;}
 input[type="text"] {width:250px;padding: 10px;border:1px solid #ccc;border-radius: 10px;font-size:16px;box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);transition:border-color 0.3s ease;}       
 
 input[type="text"]:focus {border-color: #007BFF;outline:none;box-shadow:0 0 0 2px rgba(38,143,255,0.2);}

 /* Button styles */
 button {padding:10px 20px;border:none;border-radius:10px;background-color: #9575CD;color:white;font-size:16px;cursor: pointer;transition:background-color 0.3s ease, box-shadow 0.3s ease;}
 button:hover {background-color:#0056b3;}
 button:focus {outline:none;box-shadow:0 0 0 2px rgba(38,143,255,0.2);}       
        
 label {padding:10px 5px;border:none;color: #333;font-size:14px;cursor:pointer;transition:background-color 0.3s ease, box-shadow 0.3s ease;}
 
    </style>
</head>
<body>
    <h1><b>YT</b>Info</h1>
    <label for="vkrInput">YouTube, tiktok, Facebook, Dll*</label> <div class="input">
    <input type="text" id="vkrInput" placeholder="Enter URL ID">
    <button id="fetchButton">GO</button> </div>
    <div id="data"></div>

    <script>
        document.getElementById('fetchButton').addEventListener('click', function() {
            const vkr = document.getElementById('vkrInput').value;
            const url = `https://vkrdownloader.vercel.app/server?vkr=${vkr}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const dataDiv = document.getElementById('data');
                    const table = document.createElement('table');
                    const headerRow = document.createElement('tr');
                    headerRow.innerHTML = '<th>Key</th><th>Value</th>';
                    table.appendChild(headerRow);

                    function addRows(obj) {
                        for (const key in obj) {
                            if (obj.hasOwnProperty(key)) {
                                let value = obj[key];
                                if (typeof value === 'string' && value.startsWith('http')) {
                                    // Assume it's a URL, create a link
                                    value = `<a href="${value}" target="_blank">Download</a>`;
                                } else if (typeof value === 'object' && value !== null) {
                                    // Handle nested objects
                                    const row = document.createElement('tr');
                                    row.innerHTML = `<td>${key}</td><td><table border="1">${addNestedRows(value)}</table></td>`;
                                    table.appendChild(row);
                                    continue; // Skip adding a row for nested objects
                                }

                                // Add row for key-value pairs
                                const row = document.createElement('tr');
                                row.innerHTML = `<td>${key}</td><td>${value}</td>`;
                                table.appendChild(row);
                            }
                        }
                    }

                    function addNestedRows(obj) {
                        let rows = '';
                        for (const key in obj) {
                            if (obj.hasOwnProperty(key)) {
                                let value = obj[key];
                                if (typeof value === 'string' && value.startsWith('http')) {
                                    value = `<a href="${value}" target="_blank">Download</a>`;
                                } else if (typeof value === 'object' && value !== null) {
                                    rows += `<tr><td>${key}</td><td><table border="1">${addNestedRows(value)}</table></td></tr>`;
                                    continue; // Skip adding a row for nested objects
                                }
                                rows += `<tr><td>${key}</td><td>${value}</td></tr>`;
                            }
                        }
                        return rows;
                    }

                    dataDiv.innerHTML = '';
                    addRows(data);
                    dataDiv.appendChild(table);
                })
                .catch(error => {
                    const dataDiv = document.getElementById('data');
                    dataDiv.innerHTML = `<p style="color: red;">Error fetching data: ${error.message}</p>`;
                });
        });
    </script>
</body>
</html>
